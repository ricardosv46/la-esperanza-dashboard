import{as as B,at as I,u as T,j as t,C as k,F as p,B as P,b as o,H as S,T as z,R as j,g as A,a3 as F,a7 as U}from"./index.b32bce0f.js";import{u as v,M as E}from"./useToggle.c208c263.js";import{u as M}from"./useForm.c271e1a4.js";import{S as w}from"./chakra-ui-spinner.esm.cdc97e94.js";import{T as D,a as H,b as W,c as C,d as f,e as G,f as x}from"./chakra-ui-table.esm.0e644781.js";const O=({tendido:s})=>{var r,a;const{data:n,loading:h,refetch:l}=B({fetchPolicy:"network-only",variables:{tendido:s}}),c=(a=(r=n==null?void 0:n.GetAllButacas)==null?void 0:r.data)!=null?a:[],[m]=I();return{db:c,loading:h,refetch:l,updatePrecioButaca:async(u,e)=>{var d,i;try{const g=await m({variables:{input:{butacaId:u,precio:e}}});return l(),(d=g.data)!=null&&d.UpdatePrecio?{ok:!0}:{ok:!1,error:(i=g.data)==null?void 0:i.UpdatePrecio}}catch{return{ok:!1,error:"Hubo un error"}}}}},q={precio:0,butacaId:""},$=()=>{const s=T(),{isOpen:n,onOpen:h,onClose:l}=v(),{db:c,updatePrecioButaca:m,loading:y}=O({tendido:""});console.log(c);const{values:r,...a}=M({initialValues:q}),u=(e,d)=>{m(e,d).then(i=>{i!=null&&i.ok?s({title:"Precio actualizado Correctamente",position:"top-right",isClosable:!0,status:"success"}):s({title:"Precio actualizado Inrrectamente",position:"top-right",isClosable:!0,status:"error"})})};return t(k,{maxWidth:"1930px",p:"10",children:[t(p,{flexDir:"column",children:[t(P,{maxWidth:"full",children:[o(S,{as:"h1",fontSize:22,children:"Precios de Butacas"}),o(z,{color:"blackAlpha.600",_dark:{color:"gray.400"},fontSize:"14px",mt:3,children:"Desde aqu\xED podr\xE1s visualizar la informaci\xF3n de todos los precios."})]}),o(p,{justifyContent:"flex-end",alignItems:"center",mt:5}),y?o(p,{justifyContent:"center",alignItems:"center",h:"xl",children:o(w,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"primary.500",size:"xl"})}):o(j,{children:o(D,{mt:10,children:t(H,{colorScheme:"gray",children:[o(W,{fontWeight:"black",children:t(C,{children:[o(f,{color:"gray.400",children:"Codigo"}),o(f,{color:"gray.400",children:"precio"}),o(f,{textAlign:"center",color:"gray.400",children:"Acciones"})]})}),o(G,{children:c.map(e=>t(C,{children:[o(x,{children:e==null?void 0:e.codigo}),o(x,{children:String(e==null?void 0:e.precio).includes(".")?e==null?void 0:e.precio:`${e==null?void 0:e.precio}.00`}),o(x,{children:o(p,{justifyContent:"center",alignItems:"center",gap:5,children:o(A,{"aria-label":"editar",onClick:()=>{h(),r.precio=Number(e==null?void 0:e.precio),r.butacaId=String(e==null?void 0:e.butacaId),console.log(r.precio)},children:o(F,{w:5,h:5})})})})]},e==null?void 0:e.butacaId))})]})})})]}),o(E,{isOpen:n,onClose:l,header:"Actualizar Precio",onClick:()=>u(r.butacaId,r.precio),children:o(P,{children:o(U,{type:"number",label:"Precio Butaca",...a.inputProps("precio")})})})]})};export{$ as default};
