import{au as p,av as C,u as R,j as n,C as T,F as d,B as y,b as a,H as I,T as k,g as S,a3 as z,a7 as j}from"./index.b32bce0f.js";import{u as A,M as U}from"./useToggle.c208c263.js";import{u as F}from"./useForm.c271e1a4.js";import{S as v}from"./chakra-ui-spinner.esm.cdc97e94.js";import{T as E,a as M,b as w,c as b,d as g,e as B,f as P}from"./chakra-ui-table.esm.0e644781.js";const D=()=>{var s;const{data:r,loading:l,refetch:o}=p({fetchPolicy:"network-only"}),u=(s=r==null?void 0:r.GetAllPrecioReferencial)!=null?s:[],[f]=C();return{db:u,loading:l,refetch:o,updatePrecioReferencial:async(t,h)=>{var c,e;try{const i=await f({variables:{input:{referenciaId:t,precio:h}}});return o(),(c=i.data)!=null&&c.UpdatePrecioReferencial?{ok:!0}:{ok:!1,error:(e=i.data)==null?void 0:e.UpdatePrecioReferencial}}catch{return{ok:!1,error:"Hubo un error"}}}}},H={precio:0,referenciaId:""},Q=()=>{const r=R(),{db:l,updatePrecioReferencial:o,loading:u}=D();console.log(l);const{isOpen:f,onOpen:x,onClose:s}=A(),{values:t,...h}=F({initialValues:H}),c=(e,i)=>{o(e,i).then(m=>{m!=null&&m.ok?r({title:"Precio actualizado Correctamente",position:"top-right",isClosable:!0,status:"success"}):r({title:"Precio actualizado Inrrectamente",position:"top-right",isClosable:!0,status:"error"})})};return n(T,{maxWidth:"1930px",p:"10",children:[n(d,{flexDir:"column",children:[n(y,{maxWidth:"full",children:[a(I,{as:"h1",fontSize:22,children:"Precios Referencial"}),a(k,{color:"blackAlpha.600",_dark:{color:"gray.400"},fontSize:"14px",mt:3,children:"Desde aqu\xED podr\xE1s visualizar la informaci\xF3n de todos los precios."})]}),a(d,{justifyContent:"flex-end",alignItems:"center",mt:5}),u?a(d,{justifyContent:"center",alignItems:"center",h:"xl",children:a(v,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"primary.500",size:"xl"})}):a(E,{mt:10,children:n(M,{colorScheme:"gray",children:[a(w,{fontWeight:"black",children:n(b,{children:[a(g,{color:"gray.400",children:"Titulo"}),a(g,{color:"gray.400",children:"Precio"}),a(g,{textAlign:"center",color:"gray.400",children:"Acciones"})]})}),a(B,{children:l.map(e=>n(b,{children:[a(P,{children:e==null?void 0:e.titulo}),a(P,{children:String(e==null?void 0:e.precio).includes(".")?e==null?void 0:e.precio:`${e==null?void 0:e.precio}.00`}),a(P,{children:a(d,{justifyContent:"center",alignItems:"center",gap:5,children:a(S,{"aria-label":"editar",onClick:()=>{x(),t.precio=Number(e==null?void 0:e.precio),t.referenciaId=String(e==null?void 0:e.referenciaId)},children:a(z,{w:5,h:5})})})})]},e==null?void 0:e.referenciaId))})]})})]}),a(U,{isOpen:f,onClose:s,header:"Actualizar Precio",onClick:()=>c(t.referenciaId,t.precio),children:a(y,{children:a(j,{type:"number",label:"Precio Referencial",...h.inputProps("precio")})})})]})};export{Q as default};
