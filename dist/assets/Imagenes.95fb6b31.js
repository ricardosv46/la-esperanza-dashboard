import{u as T,r as i,a as U,j as g,C as j,B as z,b as a,H as E,T as F,F as _,c as v,d as p,G as A,e as B,I as D}from"./index.b32bce0f.js";import{u as G,U as H}from"./useAllImagenes.696f7c03.js";import{P as L}from"./index.e7b399dd.js";import{S as f}from"./chakra-ui-spinner.esm.cdc97e94.js";const W=()=>{const d=T(),[h,t]=i.exports.useState(!1),[n,b]=i.exports.useState(!1),[o,x]=i.exports.useState({pagina:1,numeroPagina:10}),{db:l,loading:I,refetch:y,nTotal:c,datos:S}=G(o),C=(e,s)=>{const r=Math.ceil(e/s);return Array(r).fill(null).map((u,P)=>P+1)};console.log(S);const m=C(c,o.numeroPagina);console.log(o.numeroPagina,{nTotal:c},{paginas:m});const[k]=U(),w=async e=>{let s=!1;t(!0);for(const r of e)try{await k({variables:{imagen:r}})}catch(u){s=!0,console.log("Error al subir imagenes: ",u)}return s?(t(!1),d({status:"error",title:"Error en la subida de imagenes",description:"Ha ocurrido un error en la subida de imagenes."}),!1):(d({status:"success",title:"Subida de imagenes exitosa",description:"Todas las imagenes se han subido con exito"}),t(!1),!0)};return g(j,{p:10,flex:1,display:"flex",flexDir:"column",children:[g(z,{mb:{base:3,md:8},children:[a(E,{as:"h1",fontSize:22,children:"Imagenes"}),a(F,{mt:3,fontSize:"14px",color:"blackAlpha.600",_dark:{color:"gray.400"},children:"Desde aqu\xED podr\xE1s visualizar todas tus imagenes."})]}),a(_,{justify:"flex-end",mb:{base:3,md:8},children:a(v,{colorScheme:"primary",_dark:{bg:"#F0AC42"},w:{base:"full",md:"max"},onClick:()=>{y(),b(e=>!e)},children:n?"Ver Galeria":"Subir Imagen"})}),I&&a(p,{mt:8,children:a(f,{size:"xl",color:"primary.500"})}),!n&&a(A,{gap:8,autoRows:"200px",templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",children:l==null?void 0:l.map(({id:e,url:s,titulo:r})=>a(B.button,{rounded:"lg",pos:"relative",borderWidth:1,cursor:"pointer",borderColor:"gray.300",_dark:{borderColor:"gray.700"},_hover:{shadow:"md"},transition:"box-shadow 250ms linear",onClick:()=>{},children:a(D,{src:s,alt:r,fallback:a(p,{children:a(f,{colorScheme:"primary",size:"lg"})}),w:"full",h:"full",pos:"absolute",inset:0,objectFit:"contain"})},e))}),n&&a(H,{isLoading:h,onUpload:w}),a(L,{state:o,setstate:x,paginas:m})]})};export{W as default};
